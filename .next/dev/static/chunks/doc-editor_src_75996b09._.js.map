{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/extensions.ts"],"sourcesContent":["import { Extension } from '@tiptap/core';\r\nimport '@tiptap/extension-text-style';\r\n\r\ndeclare module '@tiptap/core' {\r\n    interface Commands<ReturnType> {\r\n        fontSize: {\r\n            setFontSize: (size: string) => ReturnType;\r\n            unsetFontSize: () => ReturnType;\r\n        };\r\n    }\r\n}\r\n\r\nexport const FontSize = Extension.create({\r\n    name: 'fontSize',\r\n\r\n    addOptions() {\r\n        return {\r\n            types: ['textStyle'],\r\n        };\r\n    },\r\n\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    fontSize: {\r\n                        default: null,\r\n                        parseHTML: (element) => element.style.fontSize.replace(/['\"]+/g, ''),\r\n                        renderHTML: (attributes) => {\r\n                            if (!attributes.fontSize) {\r\n                                return {};\r\n                            }\r\n                            return {\r\n                                style: `font-size: ${attributes.fontSize}`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n\r\n    addCommands() {\r\n        return {\r\n            setFontSize:\r\n                (fontSize) =>\r\n                    ({ chain }) => {\r\n                        return chain()\r\n                            .setMark('textStyle', { fontSize })\r\n                            .run();\r\n                    },\r\n            unsetFontSize:\r\n                () =>\r\n                    ({ chain }) => {\r\n                        return chain()\r\n                            .setMark('textStyle', { fontSize: null })\r\n                            .removeEmptyTextStyle()\r\n                            .run();\r\n                    },\r\n        };\r\n    },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAWO,MAAM,WAAW,kLAAS,CAAC,MAAM,CAAC;IACrC,MAAM;IAEN;QACI,OAAO;YACH,OAAO;gBAAC;aAAY;QACxB;IACJ;IAEA;QACI,OAAO;YACH;gBACI,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK;gBACzB,YAAY;oBACR,UAAU;wBACN,SAAS;wBACT,WAAW,CAAC,UAAY,QAAQ,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU;wBACjE,YAAY,CAAC;4BACT,IAAI,CAAC,WAAW,QAAQ,EAAE;gCACtB,OAAO,CAAC;4BACZ;4BACA,OAAO;gCACH,OAAO,CAAC,WAAW,EAAE,WAAW,QAAQ,EAAE;4BAC9C;wBACJ;oBACJ;gBACJ;YACJ;SACH;IACL;IAEA;QACI,OAAO;YACH,aACI,CAAC,WACG,CAAC,EAAE,KAAK,EAAE;oBACN,OAAO,QACF,OAAO,CAAC,aAAa;wBAAE;oBAAS,GAChC,GAAG;gBACZ;YACR,eACI,IACI,CAAC,EAAE,KAAK,EAAE;oBACN,OAAO,QACF,OAAO,CAAC,aAAa;wBAAE,UAAU;oBAAK,GACtC,oBAAoB,GACpB,GAAG;gBACZ;QACZ;IACJ;AACJ"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/EditorToolbar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Editor } from '@tiptap/react';\r\nimport { \r\n  Undo2, \r\n  Redo2, \r\n  Bold, \r\n  Italic, \r\n  Underline, \r\n  Strikethrough,\r\n  ChevronDown,\r\n  Table,\r\n  Moon,\r\n  Sun,\r\n  FileDown\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ToolbarProps {\r\n  editor: Editor | null;\r\n  theme: 'light' | 'dark';\r\n  onToggleTheme: () => void;\r\n  onExportPDF: () => void;\r\n}\r\n\r\nconst FONT_SIZES = ['8', '9', '10', '11', '12', '14', '16', '18', '20', '24', '28', '32', '36', '48'];\r\n\r\nconst HEADINGS = [\r\n  { label: 'Normal text', value: 'paragraph', level: 0 },\r\n  { label: 'Heading 1', value: 'heading', level: 1 },\r\n  { label: 'Heading 2', value: 'heading', level: 2 },\r\n  { label: 'Heading 3', value: 'heading', level: 3 },\r\n  { label: 'Heading 4', value: 'heading', level: 4 },\r\n  { label: 'Heading 5', value: 'heading', level: 5 },\r\n  { label: 'Heading 6', value: 'heading', level: 6 },\r\n];\r\n\r\nconst ToolbarButton = ({ \r\n  onClick, \r\n  disabled = false, \r\n  active = false, \r\n  children, \r\n  title \r\n}: { \r\n  onClick: () => void; \r\n  disabled?: boolean; \r\n  active?: boolean; \r\n  children: React.ReactNode; \r\n  title: string;\r\n}) => (\r\n  <button\r\n    type=\"button\"\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    title={title}\r\n    className={cn(\r\n      \"h-8 w-8 flex items-center justify-center rounded transition-colors\",\r\n      \"hover:bg-accent disabled:opacity-40 disabled:cursor-not-allowed\",\r\n      active && \"bg-accent\"\r\n    )}\r\n  >\r\n    {children}\r\n  </button>\r\n);\r\n\r\nconst Dropdown = ({\r\n  trigger,\r\n  children,\r\n  open,\r\n  onOpenChange,\r\n}: {\r\n  trigger: React.ReactNode;\r\n  children: React.ReactNode;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(event.target as Node)) {\r\n        onOpenChange(false);\r\n      }\r\n    };\r\n    if (open) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [open, onOpenChange]);\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => onOpenChange(!open)}\r\n        className=\"h-8 px-2 flex items-center gap-1 rounded hover:bg-accent transition-colors text-sm\"\r\n      >\r\n        {trigger}\r\n        <ChevronDown className=\"h-3 w-3\" />\r\n      </button>\r\n      {open && (\r\n        <div className=\"absolute top-full left-0 mt-1 z-50 min-w-[140px] bg-popover border border-border rounded-md shadow-lg py-1\">\r\n          {children}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst EditorToolbar: React.FC<ToolbarProps> = ({ editor, theme, onToggleTheme, onExportPDF }) => {\r\n  const [headingOpen, setHeadingOpen] = useState(false);\r\n  const [fontSizeOpen, setFontSizeOpen] = useState(false);\r\n  const [listOpen, setListOpen] = useState(false);\r\n  const [tableOpen, setTableOpen] = useState(false);\r\n  const [tableRows, setTableRows] = useState('3');\r\n  const [tableCols, setTableCols] = useState('3');\r\n\r\n  if (!editor) return null;\r\n\r\n  const getCurrentHeading = (): string => {\r\n    for (let i = 1; i <= 6; i++) {\r\n      if (editor.isActive('heading', { level: i })) {\r\n        return `Heading ${i}`;\r\n      }\r\n    }\r\n    return 'Normal text';\r\n  };\r\n\r\n  const getCurrentFontSize = (): string => {\r\n    const attrs = editor.getAttributes('textStyle');\r\n    if (attrs && attrs.fontSize) {\r\n      return String(attrs.fontSize).replace('pt', '');\r\n    }\r\n    return '12';\r\n  };\r\n\r\n  const setHeading = (value: string, level: number) => {\r\n    if (value === 'paragraph') {\r\n      editor.chain().focus().setParagraph().run();\r\n    } else {\r\n      editor.chain().focus().toggleHeading({ level: level as 1 | 2 | 3 | 4 | 5 | 6 }).run();\r\n    }\r\n    setHeadingOpen(false);\r\n  };\r\n\r\n  const setFontSize = (size: string) => {\r\n    editor.chain().focus().setMark('textStyle', { fontSize: `${size}pt` }).run();\r\n    setFontSizeOpen(false);\r\n  };\r\n\r\n  const insertTable = () => {\r\n    const rows = Math.max(1, parseInt(tableRows) || 3);\r\n    const cols = Math.max(1, parseInt(tableCols) || 3);\r\n    editor.chain().focus().insertTable({ rows, cols, withHeaderRow: true }).run();\r\n    setTableOpen(false);\r\n    setTableRows('3');\r\n    setTableCols('3');\r\n  };\r\n\r\n  const canUndo = editor.can().undo();\r\n  const canRedo = editor.can().redo();\r\n\r\n  return (\r\n    <div className=\"no-print flex items-center gap-1 px-3 py-2 bg-toolbar border-b border-toolbar-border flex-wrap\">\r\n      {/* Theme Toggle - Extreme Left */}\r\n      <ToolbarButton\r\n        onClick={onToggleTheme}\r\n        title={theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode'}\r\n      >\r\n        {theme === 'light' ? <Moon className=\"h-4 w-4\" /> : <Sun className=\"h-4 w-4\" />}\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Undo / Redo */}\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().undo().run()}\r\n        disabled={!canUndo}\r\n        title=\"Undo (Ctrl+Z)\"\r\n      >\r\n        <Undo2 className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().redo().run()}\r\n        disabled={!canRedo}\r\n        title=\"Redo (Ctrl+Y)\"\r\n      >\r\n        <Redo2 className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Heading Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[90px] text-left\">{getCurrentHeading()}</span>}\r\n        open={headingOpen}\r\n        onOpenChange={setHeadingOpen}\r\n      >\r\n        {HEADINGS.map((h) => (\r\n          <div\r\n            key={h.label}\r\n            onClick={() => setHeading(h.value, h.level)}\r\n            className={cn(\r\n              \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n              ((h.value === 'paragraph' && !editor.isActive('heading')) ||\r\n                (h.value === 'heading' && editor.isActive('heading', { level: h.level }))) &&\r\n                \"bg-accent font-medium\"\r\n            )}\r\n          >\r\n            {h.label}\r\n          </div>\r\n        ))}\r\n      </Dropdown>\r\n\r\n      {/* Font Size Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[40px] text-center\">{getCurrentFontSize()}</span>}\r\n        open={fontSizeOpen}\r\n        onOpenChange={setFontSizeOpen}\r\n      >\r\n        {FONT_SIZES.map((size) => (\r\n          <div\r\n            key={size}\r\n            onClick={() => setFontSize(size)}\r\n            className={cn(\r\n              \"px-3 py-1.5 text-sm cursor-pointer hover:bg-accent\",\r\n              getCurrentFontSize() === size && \"bg-accent font-medium\"\r\n            )}\r\n          >\r\n            {size}\r\n          </div>\r\n        ))}\r\n      </Dropdown>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Formatting Buttons */}\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleBold().run()}\r\n        active={editor.isActive('bold')}\r\n        title=\"Bold (Ctrl+B)\"\r\n      >\r\n        <Bold className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n        active={editor.isActive('italic')}\r\n        title=\"Italic (Ctrl+I)\"\r\n      >\r\n        <Italic className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleUnderline().run()}\r\n        active={editor.isActive('underline')}\r\n        title=\"Underline (Ctrl+U)\"\r\n      >\r\n        <Underline className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n        active={editor.isActive('strike')}\r\n        title=\"Strikethrough\"\r\n      >\r\n        <Strikethrough className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Lists Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[60px] text-left\">Lists</span>}\r\n        open={listOpen}\r\n        onOpenChange={setListOpen}\r\n      >\r\n        <div\r\n          onClick={() => {\r\n            editor.chain().focus().toggleBulletList().run();\r\n            setListOpen(false);\r\n          }}\r\n          className={cn(\r\n            \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n            editor.isActive('bulletList') && \"bg-accent font-medium\"\r\n          )}\r\n        >\r\n          Bulleted list\r\n        </div>\r\n        <div\r\n          onClick={() => {\r\n            editor.chain().focus().toggleOrderedList().run();\r\n            setListOpen(false);\r\n          }}\r\n          className={cn(\r\n            \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n            editor.isActive('orderedList') && \"bg-accent font-medium\"\r\n          )}\r\n        >\r\n          Numbered list\r\n        </div>\r\n      </Dropdown>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Table Insert */}\r\n      <Dropdown\r\n        trigger={\r\n          <>\r\n            <Table className=\"h-4 w-4\" />\r\n            <span className=\"ml-1\">Table</span>\r\n          </>\r\n        }\r\n        open={tableOpen}\r\n        onOpenChange={setTableOpen}\r\n      >\r\n        <div className=\"p-3\">\r\n          <div className=\"text-sm font-medium mb-2\">Insert Table</div>\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <input\r\n              type=\"number\"\r\n              value={tableRows}\r\n              onChange={(e) => setTableRows(e.target.value)}\r\n              min=\"1\"\r\n              max=\"20\"\r\n              className=\"w-14 h-8 px-2 text-sm border border-border rounded bg-background text-foreground\"\r\n              placeholder=\"Rows\"\r\n            />\r\n            <span className=\"text-sm text-muted-foreground\">x</span>\r\n            <input\r\n              type=\"number\"\r\n              value={tableCols}\r\n              onChange={(e) => setTableCols(e.target.value)}\r\n              min=\"1\"\r\n              max=\"10\"\r\n              className=\"w-14 h-8 px-2 text-sm border border-border rounded bg-background text-foreground\"\r\n              placeholder=\"Cols\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={insertTable}\r\n            className=\"w-full h-8 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors\"\r\n          >\r\n            Insert\r\n          </button>\r\n        </div>\r\n      </Dropdown>\r\n\r\n      <div className=\"flex-1\" />\r\n\r\n      {/* Export PDF */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={onExportPDF}\r\n        className=\"h-8 px-3 flex items-center gap-2 rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors text-sm\"\r\n      >\r\n        <FileDown className=\"h-4 w-4\" />\r\n        Export PDF\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditorToolbar;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 665, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/TableMenu.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Editor } from '@tiptap/react';\r\nimport {\r\n  Plus,\r\n  Minus,\r\n  Trash2,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  ArrowLeft,\r\n  ArrowRight,\r\n} from 'lucide-react';\r\n\r\ninterface TableMenuProps {\r\n  editor: Editor;\r\n}\r\n\r\nconst TableMenu: React.FC<TableMenuProps> = ({ editor }) => {\r\n  return (\r\n    <div className=\"table-menu\">\r\n      {/* Add row above */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addRowBefore().run()}\r\n        title=\"Add row above\"\r\n      >\r\n        <ArrowUp className=\"h-3 w-3\" />\r\n        <Plus className=\"h-3 w-3\" />\r\n      </button>\r\n\r\n      {/* Add row below */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addRowAfter().run()}\r\n        title=\"Add row below\"\r\n      >\r\n        <ArrowDown className=\"h-3 w-3\" />\r\n        <Plus className=\"h-3 w-3\" />\r\n      </button>\r\n\r\n      <div className=\"separator\" />\r\n\r\n      {/* Add column left */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addColumnBefore().run()}\r\n        title=\"Add column left\"\r\n      >\r\n        <ArrowLeft className=\"h-3 w-3\" />\r\n        <Plus className=\"h-3 w-3\" />\r\n      </button>\r\n\r\n      {/* Add column right */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addColumnAfter().run()}\r\n        title=\"Add column right\"\r\n      >\r\n        <ArrowRight className=\"h-3 w-3\" />\r\n        <Plus className=\"h-3 w-3\" />\r\n      </button>\r\n\r\n      <div className=\"separator\" />\r\n\r\n      {/* Delete row */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteRow().run()}\r\n        title=\"Delete row\"\r\n      >\r\n        <Minus className=\"h-3 w-3\" />\r\n        Row\r\n      </button>\r\n\r\n      {/* Delete column */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteColumn().run()}\r\n        title=\"Delete column\"\r\n      >\r\n        <Minus className=\"h-3 w-3\" />\r\n        Col\r\n      </button>\r\n\r\n      <div className=\"separator\" />\r\n\r\n      {/* Delete table */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteTable().run()}\r\n        title=\"Delete table\"\r\n        className=\"text-destructive hover:text-destructive\"\r\n      >\r\n        <Trash2 className=\"h-3 w-3\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableMenu;\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAcA,MAAM,YAAsC,CAAC,EAAE,MAAM,EAAE;IACrD,qBACE,8MAAC;QAAI,WAAU;;0BAEb,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;gBACxD,OAAM;;kCAEN,8MAAC,2OAAO;wBAAC,WAAU;;;;;;kCACnB,8MAAC,8NAAI;wBAAC,WAAU;;;;;;;;;;;;0BAIlB,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,WAAW,GAAG,GAAG;gBACvD,OAAM;;kCAEN,8MAAC,iPAAS;wBAAC,WAAU;;;;;;kCACrB,8MAAC,8NAAI;wBAAC,WAAU;;;;;;;;;;;;0BAGlB,8MAAC;gBAAI,WAAU;;;;;;0BAGf,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,eAAe,GAAG,GAAG;gBAC3D,OAAM;;kCAEN,8MAAC,iPAAS;wBAAC,WAAU;;;;;;kCACrB,8MAAC,8NAAI;wBAAC,WAAU;;;;;;;;;;;;0BAIlB,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,cAAc,GAAG,GAAG;gBAC1D,OAAM;;kCAEN,8MAAC,oPAAU;wBAAC,WAAU;;;;;;kCACtB,8MAAC,8NAAI;wBAAC,WAAU;;;;;;;;;;;;0BAGlB,8MAAC;gBAAI,WAAU;;;;;;0BAGf,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,SAAS,GAAG,GAAG;gBACrD,OAAM;;kCAEN,8MAAC,iOAAK;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAK/B,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;gBACxD,OAAM;;kCAEN,8MAAC,iOAAK;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAI/B,8MAAC;gBAAI,WAAU;;;;;;0BAGf,8MAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,WAAW,GAAG,GAAG;gBACvD,OAAM;gBACN,WAAU;0BAEV,cAAA,8MAAC,wOAAM;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1B;KAhFM;uCAkFS"}},
    {"offset": {"line": 877, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/DocumentEditor.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Table from '@tiptap/extension-table';\r\nimport TableRow from '@tiptap/extension-table-row';\r\nimport TableHeader from '@tiptap/extension-table-header';\r\nimport TableCell from '@tiptap/extension-table-cell';\r\nimport Underline from '@tiptap/extension-underline';\r\nimport TextStyle from '@tiptap/extension-text-style';\r\nimport { Pagination } from 'tiptap-pagination-plus';\r\nimport { FontSize } from './extensions';\r\nimport EditorToolbar from './EditorToolbar';\r\nimport TableMenu from './TableMenu';\r\nimport { useState, useEffect } from 'react';\r\nimport { jsPDF } from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport default function DocumentEditor() {\r\n    const [theme, setTheme] = useState<'light' | 'dark'>('light');\r\n\r\n    useEffect(() => {\r\n        // Initial theme setup\r\n        if (theme === 'dark') {\r\n            document.documentElement.classList.add('dark');\r\n        } else {\r\n            document.documentElement.classList.remove('dark');\r\n        }\r\n    }, [theme]);\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => prev === 'light' ? 'dark' : 'light');\r\n    };\r\n\r\n    const editor = useEditor({\r\n        extensions: [\r\n            StarterKit,\r\n            Table.configure({\r\n                resizable: true,\r\n            }),\r\n            TableRow,\r\n            TableHeader,\r\n            TableCell,\r\n            Underline,\r\n            TextStyle,\r\n            FontSize,\r\n            Pagination.configure({\r\n                pageHeight: '29.7cm',\r\n                pageWidth: '21cm',\r\n                // Adjust these based on requirements if needed\r\n            }),\r\n        ],\r\n        content: `\r\n            <h1>Document Title</h1>\r\n            <p>Start typing your document here...</p>\r\n        `,\r\n        editorProps: {\r\n            attributes: {\r\n                class: 'outline-none p-8 min-h-[1056px] w-[816px] mx-auto bg-[var(--page-bg)] text-[var(--editor-text)] shadow-[0_0_10px_var(--page-shadow)] border border-[var(--page-border)]',\r\n                style: 'min-height: 29.7cm; width: 21cm;',\r\n            },\r\n        },\r\n        immediatelyRender: false,\r\n    });\r\n\r\n    const exportPDF = async () => {\r\n        const element = document.querySelector('.ProseMirror');\r\n        if (element) {\r\n            try {\r\n                const canvas = await html2canvas(element as HTMLElement, {\r\n                    scale: 2, // Improve quality\r\n                    useCORS: true,\r\n                });\r\n                const imgData = canvas.toDataURL('image/png');\r\n                const pdf = new jsPDF({\r\n                    orientation: 'portrait',\r\n                    unit: 'mm',\r\n                    format: 'a4',\r\n                });\r\n\r\n                const imgWidth = 210;\r\n                const pageHeight = 297;\r\n                const imgHeight = (canvas.height * imgWidth) / canvas.width;\r\n\r\n                let heightLeft = imgHeight;\r\n                let position = 0;\r\n\r\n                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n                heightLeft -= pageHeight;\r\n\r\n                while (heightLeft >= 0) {\r\n                    position = heightLeft - imgHeight;\r\n                    pdf.addPage();\r\n                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n                    heightLeft -= pageHeight;\r\n                }\r\n\r\n                pdf.save('document.pdf');\r\n            } catch (err) {\r\n                console.error('Failed to export PDF', err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`flex flex-col h-screen w-full bg-[var(--workspace-bg)] text-[var(--foreground)]`}>\r\n            <EditorToolbar\r\n                editor={editor}\r\n                theme={theme}\r\n                onToggleTheme={toggleTheme}\r\n                onExportPDF={exportPDF}\r\n            />\r\n            <div className=\"flex-1 overflow-auto p-8 relative\">\r\n                {editor && <TableMenu editor={editor} />}\r\n                <EditorContent editor={editor} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAhBA;;;;;;;;;;;;;;;;AAkBe,SAAS;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,0LAAQ,EAAmB;IAErD,IAAA,2LAAS;oCAAC;YACN,sBAAsB;YACtB,IAAI,UAAU,QAAQ;gBAClB,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YAC3C,OAAO;gBACH,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9C;QACJ;mCAAG;QAAC;KAAM;IAEV,MAAM,cAAc;QAChB,SAAS,CAAA,OAAQ,SAAS,UAAU,SAAS;IACjD;IAEA,MAAM,SAAS,IAAA,mMAAS,EAAC;QACrB,YAAY;YACR,0LAAU;YACV,8LAAK,CAAC,SAAS,CAAC;gBACZ,WAAW;YACf;YACA,qMAAQ;YACR,wMAAW;YACX,sMAAS;YACT,kMAAS;YACT,sMAAS;YACT,yKAAQ;YACR,+LAAU,CAAC,SAAS,CAAC;gBACjB,YAAY;gBACZ,WAAW;YAEf;SACH;QACD,SAAS,CAAC;;;QAGV,CAAC;QACD,aAAa;YACT,YAAY;gBACR,OAAO;gBACP,OAAO;YACX;QACJ;QACA,mBAAmB;IACvB;IAEA,MAAM,YAAY;QACd,MAAM,UAAU,SAAS,aAAa,CAAC;QACvC,IAAI,SAAS;YACT,IAAI;gBACA,MAAM,SAAS,MAAM,IAAA,iLAAW,EAAC,SAAwB;oBACrD,OAAO;oBACP,SAAS;gBACb;gBACA,MAAM,UAAU,OAAO,SAAS,CAAC;gBACjC,MAAM,MAAM,IAAI,gLAAK,CAAC;oBAClB,aAAa;oBACb,MAAM;oBACN,QAAQ;gBACZ;gBAEA,MAAM,WAAW;gBACjB,MAAM,aAAa;gBACnB,MAAM,YAAY,AAAC,OAAO,MAAM,GAAG,WAAY,OAAO,KAAK;gBAE3D,IAAI,aAAa;gBACjB,IAAI,WAAW;gBAEf,IAAI,QAAQ,CAAC,SAAS,OAAO,GAAG,UAAU,UAAU;gBACpD,cAAc;gBAEd,MAAO,cAAc,EAAG;oBACpB,WAAW,aAAa;oBACxB,IAAI,OAAO;oBACX,IAAI,QAAQ,CAAC,SAAS,OAAO,GAAG,UAAU,UAAU;oBACpD,cAAc;gBAClB;gBAEA,IAAI,IAAI,CAAC;YACb,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,wBAAwB;YAC1C;QACJ;IACJ;IAEA,qBACI,8MAAC;QAAI,WAAW,CAAC,+EAA+E,CAAC;;0BAC7F,8MAAC,4KAAa;gBACV,QAAQ;gBACR,OAAO;gBACP,eAAe;gBACf,aAAa;;;;;;0BAEjB,8MAAC;gBAAI,WAAU;;oBACV,wBAAU,8MAAC,wKAAS;wBAAC,QAAQ;;;;;;kCAC9B,8MAAC,uMAAa;wBAAC,QAAQ;;;;;;;;;;;;;;;;;;AAIvC;GApGwB;;QAgBL,mMAAS;;;KAhBJ"}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport DocumentEditor from '@/components/editor/DocumentEditor';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { useState } from 'react';\r\n\r\nexport default function Home() {\r\n    const [queryClient] = useState(() => new QueryClient());\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <DocumentEditor />\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAMe,SAAS;;IACpB,MAAM,CAAC,YAAY,GAAG,IAAA,0LAAQ;yBAAC,IAAM,IAAI,gNAAW;;IAEpD,qBACI,8MAAC,iOAAmB;QAAC,QAAQ;kBACzB,cAAA,8MAAC,6KAAc;;;;;;;;;;AAG3B;GARwB;KAAA"}}]
}