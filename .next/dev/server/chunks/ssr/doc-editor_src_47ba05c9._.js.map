{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/EditorToolbar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Editor } from '@tiptap/react';\r\nimport {\r\n  Undo2,\r\n  Redo2,\r\n  Bold,\r\n  Italic,\r\n  Underline,\r\n  Strikethrough,\r\n  ChevronDown,\r\n  Table,\r\n  Moon,\r\n  Sun,\r\n  FileDown,\r\n  AlignLeft,\r\n  AlignCenter,\r\n  AlignRight,\r\n  AlignJustify\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ToolbarProps {\r\n  editor: Editor | null;\r\n  theme: 'light' | 'dark';\r\n  onToggleTheme: () => void;\r\n  onExportPDF: () => void;\r\n}\r\n\r\nconst FONT_SIZES = ['8', '9', '10', '11', '12', '14', '16', '18', '20', '24', '28', '32', '36', '48'];\r\n\r\nconst HEADINGS = [\r\n  { label: 'Normal text', value: 'paragraph', level: 0 },\r\n  { label: 'Heading 1', value: 'heading', level: 1 },\r\n  { label: 'Heading 2', value: 'heading', level: 2 },\r\n  { label: 'Heading 3', value: 'heading', level: 3 },\r\n  { label: 'Heading 4', value: 'heading', level: 4 },\r\n  { label: 'Heading 5', value: 'heading', level: 5 },\r\n  { label: 'Heading 6', value: 'heading', level: 6 },\r\n];\r\n\r\nconst ToolbarButton = ({\r\n  onClick,\r\n  disabled = false,\r\n  active = false,\r\n  children,\r\n  title\r\n}: {\r\n  onClick: () => void;\r\n  disabled?: boolean;\r\n  active?: boolean;\r\n  children: React.ReactNode;\r\n  title: string;\r\n}) => (\r\n  <button\r\n    type=\"button\"\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    title={title}\r\n    className={cn(\r\n      \"h-8 w-8 flex items-center justify-center rounded transition-colors\",\r\n      \"hover:bg-accent disabled:opacity-40 disabled:cursor-not-allowed\",\r\n      active && \"bg-accent\"\r\n    )}\r\n  >\r\n    {children}\r\n  </button>\r\n);\r\n\r\nconst Dropdown = ({\r\n  trigger,\r\n  children,\r\n  open,\r\n  onOpenChange,\r\n}: {\r\n  trigger: React.ReactNode;\r\n  children: React.ReactNode;\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(event.target as Node)) {\r\n        onOpenChange(false);\r\n      }\r\n    };\r\n    if (open) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [open, onOpenChange]);\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => onOpenChange(!open)}\r\n        className=\"h-8 px-2 flex items-center gap-1 rounded hover:bg-accent transition-colors text-sm text-foreground\"\r\n      >\r\n        {trigger}\r\n        <ChevronDown className=\"h-3 w-3\" />\r\n      </button>\r\n      {open && (\r\n        <div className=\"absolute top-full left-0 mt-1 z-50 min-w-[140px] bg-popover text-popover-foreground border border-border rounded-md shadow-lg py-1\">\r\n          {children}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst EditorToolbar: React.FC<ToolbarProps> = ({ editor, theme, onToggleTheme, onExportPDF }) => {\r\n  const [headingOpen, setHeadingOpen] = useState(false);\r\n  const [fontSizeOpen, setFontSizeOpen] = useState(false);\r\n  const [listOpen, setListOpen] = useState(false);\r\n  const [tableOpen, setTableOpen] = useState(false);\r\n  const [tableRows, setTableRows] = useState('3');\r\n  const [tableCols, setTableCols] = useState('3');\r\n\r\n  if (!editor) return null;\r\n\r\n  const getCurrentHeading = (): string => {\r\n    for (let i = 1; i <= 6; i++) {\r\n      if (editor.isActive('heading', { level: i })) {\r\n        return `Heading ${i}`;\r\n      }\r\n    }\r\n    return 'Normal text';\r\n  };\r\n\r\n  const getCurrentFontSize = (): string => {\r\n    const attrs = editor.getAttributes('textStyle');\r\n    if (attrs && attrs.fontSize) {\r\n      return String(attrs.fontSize).replace('pt', '');\r\n    }\r\n    return '12';\r\n  };\r\n\r\n  const setHeading = (value: string, level: number) => {\r\n    if (value === 'paragraph') {\r\n      editor.chain().focus().setParagraph().run();\r\n    } else {\r\n      editor.chain().focus().toggleHeading({ level: level as 1 | 2 | 3 | 4 | 5 | 6 }).run();\r\n    }\r\n    setHeadingOpen(false);\r\n  };\r\n\r\n  const setFontSize = (size: string) => {\r\n    editor.chain().focus().setMark('textStyle', { fontSize: `${size}pt` }).run();\r\n    setFontSizeOpen(false);\r\n  };\r\n\r\n  const insertTable = () => {\r\n    const rows = Math.max(1, parseInt(tableRows) || 3);\r\n    const cols = Math.max(1, parseInt(tableCols) || 3);\r\n    editor.chain().focus().insertTable({ rows, cols, withHeaderRow: true }).run();\r\n    setTableOpen(false);\r\n    setTableRows('3');\r\n    setTableCols('3');\r\n  };\r\n\r\n  const canUndo = editor.can().undo();\r\n  const canRedo = editor.can().redo();\r\n\r\n  return (\r\n    <div className=\"no-print flex items-center gap-1 px-3 py-2 bg-toolbar text-foreground border-b border-toolbar-border flex-wrap\">\r\n      {/* Theme Toggle - Extreme Left */}\r\n      <ToolbarButton\r\n        onClick={onToggleTheme}\r\n        title={theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode'}\r\n      >\r\n        {theme === 'light' ? <Moon className=\"h-4 w-4\" /> : <Sun className=\"h-4 w-4\" />}\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Undo / Redo */}\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().undo().run()}\r\n        disabled={!canUndo}\r\n        title=\"Undo (Ctrl+Z)\"\r\n      >\r\n        <Undo2 className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().redo().run()}\r\n        disabled={!canRedo}\r\n        title=\"Redo (Ctrl+Y)\"\r\n      >\r\n        <Redo2 className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Heading Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[90px] text-left\">{getCurrentHeading()}</span>}\r\n        open={headingOpen}\r\n        onOpenChange={setHeadingOpen}\r\n      >\r\n        {HEADINGS.map((h) => (\r\n          <div\r\n            key={h.label}\r\n            onClick={() => setHeading(h.value, h.level)}\r\n            className={cn(\r\n              \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n              ((h.value === 'paragraph' && !editor.isActive('heading')) ||\r\n                (h.value === 'heading' && editor.isActive('heading', { level: h.level }))) &&\r\n              \"bg-accent font-medium\"\r\n            )}\r\n          >\r\n            {h.label}\r\n          </div>\r\n        ))}\r\n      </Dropdown>\r\n\r\n      {/* Font Size Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[40px] text-center\">{getCurrentFontSize()}</span>}\r\n        open={fontSizeOpen}\r\n        onOpenChange={setFontSizeOpen}\r\n      >\r\n        {FONT_SIZES.map((size) => (\r\n          <div\r\n            key={size}\r\n            onClick={() => setFontSize(size)}\r\n            className={cn(\r\n              \"px-3 py-1.5 text-sm cursor-pointer hover:bg-accent\",\r\n              getCurrentFontSize() === size && \"bg-accent font-medium\"\r\n            )}\r\n          >\r\n            {size}\r\n          </div>\r\n        ))}\r\n      </Dropdown>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Formatting Buttons */}\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleBold().run()}\r\n        active={editor.isActive('bold')}\r\n        title=\"Bold (Ctrl+B)\"\r\n      >\r\n        <Bold className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n        active={editor.isActive('italic')}\r\n        title=\"Italic (Ctrl+I)\"\r\n      >\r\n        <Italic className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleUnderline().run()}\r\n        active={editor.isActive('underline')}\r\n        title=\"Underline (Ctrl+U)\"\r\n      >\r\n        <Underline className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n        active={editor.isActive('strike')}\r\n        title=\"Strikethrough\"\r\n      >\r\n        <Strikethrough className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Alignment Buttons */}\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().setTextAlign('left').run()}\r\n        active={editor.isActive({ textAlign: 'left' })}\r\n        title=\"Align Left\"\r\n      >\r\n        <AlignLeft className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().setTextAlign('center').run()}\r\n        active={editor.isActive({ textAlign: 'center' })}\r\n        title=\"Align Center\"\r\n      >\r\n        <AlignCenter className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().setTextAlign('right').run()}\r\n        active={editor.isActive({ textAlign: 'right' })}\r\n        title=\"Align Right\"\r\n      >\r\n        <AlignRight className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n      <ToolbarButton\r\n        onClick={() => editor.chain().focus().setTextAlign('justify').run()}\r\n        active={editor.isActive({ textAlign: 'justify' })}\r\n        title=\"Justify\"\r\n      >\r\n        <AlignJustify className=\"h-4 w-4\" />\r\n      </ToolbarButton>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Lists Dropdown */}\r\n      <Dropdown\r\n        trigger={<span className=\"min-w-[60px] text-left\">Lists</span>}\r\n        open={listOpen}\r\n        onOpenChange={setListOpen}\r\n      >\r\n        <div\r\n          onClick={() => {\r\n            editor.chain().focus().toggleBulletList().run();\r\n            setListOpen(false);\r\n          }}\r\n          className={cn(\r\n            \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n            editor.isActive('bulletList') && \"bg-accent font-medium\"\r\n          )}\r\n        >\r\n          Bulleted list\r\n        </div>\r\n        <div\r\n          onClick={() => {\r\n            editor.chain().focus().toggleOrderedList().run();\r\n            setListOpen(false);\r\n          }}\r\n          className={cn(\r\n            \"px-3 py-2 text-sm cursor-pointer hover:bg-accent\",\r\n            editor.isActive('orderedList') && \"bg-accent font-medium\"\r\n          )}\r\n        >\r\n          Numbered list\r\n        </div>\r\n      </Dropdown>\r\n\r\n      <div className=\"w-px h-6 bg-border mx-1\" />\r\n\r\n      {/* Table Insert */}\r\n      <Dropdown\r\n        trigger={\r\n          <>\r\n            <Table className=\"h-4 w-4\" />\r\n            <span className=\"ml-1\">Table</span>\r\n          </>\r\n        }\r\n        open={tableOpen}\r\n        onOpenChange={setTableOpen}\r\n      >\r\n        <div className=\"p-3\">\r\n          <div className=\"text-sm font-medium mb-2\">Insert Table</div>\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <input\r\n              type=\"number\"\r\n              value={tableRows}\r\n              onChange={(e) => setTableRows(e.target.value)}\r\n              min=\"1\"\r\n              max=\"20\"\r\n              className=\"w-14 h-8 px-2 text-sm border border-border rounded bg-background text-foreground\"\r\n              placeholder=\"Rows\"\r\n            />\r\n            <span className=\"text-sm text-muted-foreground\">x</span>\r\n            <input\r\n              type=\"number\"\r\n              value={tableCols}\r\n              onChange={(e) => setTableCols(e.target.value)}\r\n              min=\"1\"\r\n              max=\"10\"\r\n              className=\"w-14 h-8 px-2 text-sm border border-border rounded bg-background text-foreground\"\r\n              placeholder=\"Cols\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={insertTable}\r\n            className=\"w-full h-8 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors\"\r\n          >\r\n            Insert\r\n          </button>\r\n        </div>\r\n      </Dropdown>\r\n\r\n      <div className=\"flex-1\" />\r\n\r\n      {/* Export PDF */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={onExportPDF}\r\n        className=\"h-8 px-3 flex items-center gap-2 rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors text-sm\"\r\n      >\r\n        <FileDown className=\"h-4 w-4\" />\r\n        Export PDF\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditorToolbar;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/TableMenu.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Editor, BubbleMenu } from '@tiptap/react';\r\nimport {\r\n  Plus,\r\n  Minus,\r\n  Trash2,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  ArrowLeft,\r\n  ArrowRight,\r\n} from 'lucide-react';\r\n\r\ninterface TableMenuProps {\r\n  editor: Editor;\r\n}\r\n\r\nconst TableMenu: React.FC<TableMenuProps> = ({ editor }) => {\r\n  return (\r\n    <BubbleMenu\r\n      editor={editor}\r\n      tippyOptions={{ duration: 100, placement: 'top' }}\r\n      shouldShow={({ editor }) => editor.isActive('table')}\r\n      className=\"flex items-center gap-1 p-1 bg-popover border border-border rounded-md shadow-md\"\r\n    >\r\n      {/* Add row above */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addRowBefore().run()}\r\n        title=\"Add row above\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground\"\r\n      >\r\n        <div className=\"flex items-center\">\r\n            <ArrowUp className=\"h-3 w-3\" />\r\n            <Plus className=\"h-3 w-3\" />\r\n        </div>\r\n      </button>\r\n\r\n      {/* Add row below */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addRowAfter().run()}\r\n        title=\"Add row below\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground\"\r\n      >\r\n        <div className=\"flex items-center\">\r\n            <ArrowDown className=\"h-3 w-3\" />\r\n            <Plus className=\"h-3 w-3\" />\r\n        </div>\r\n      </button>\r\n\r\n      <div className=\"w-px h-4 bg-border mx-1\" />\r\n\r\n      {/* Add column left */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addColumnBefore().run()}\r\n        title=\"Add column left\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground\"\r\n      >\r\n        <div className=\"flex items-center\">\r\n            <ArrowLeft className=\"h-3 w-3\" />\r\n            <Plus className=\"h-3 w-3\" />\r\n        </div>\r\n      </button>\r\n\r\n      {/* Add column right */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().addColumnAfter().run()}\r\n        title=\"Add column right\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground\"\r\n      >\r\n        <div className=\"flex items-center\">\r\n            <ArrowRight className=\"h-3 w-3\" />\r\n            <Plus className=\"h-3 w-3\" />\r\n        </div>\r\n      </button>\r\n\r\n      <div className=\"w-px h-4 bg-border mx-1\" />\r\n\r\n      {/* Delete row */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteRow().run()}\r\n        title=\"Delete row\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground flex items-center text-xs\"\r\n      >\r\n        <Minus className=\"h-3 w-3 mr-1\" />\r\n        Row\r\n      </button>\r\n\r\n      {/* Delete column */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteColumn().run()}\r\n        title=\"Delete column\"\r\n        className=\"p-1 hover:bg-accent rounded text-popover-foreground flex items-center text-xs\"\r\n      >\r\n        <Minus className=\"h-3 w-3 mr-1\" />\r\n        Col\r\n      </button>\r\n\r\n      <div className=\"w-px h-4 bg-border mx-1\" />\r\n\r\n      {/* Delete table */}\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => editor.chain().focus().deleteTable().run()}\r\n        title=\"Delete table\"\r\n        className=\"p-1 hover:bg-accent rounded text-destructive hover:text-destructive\"\r\n      >\r\n        <Trash2 className=\"h-3 w-3\" />\r\n      </button>\r\n    </BubbleMenu>\r\n  );\r\n};\r\n\r\nexport default TableMenu;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAcA,MAAM,YAAsC,CAAC,EAAE,MAAM,EAAE;IACrD,qBACE,+PAAC,iMAAU;QACT,QAAQ;QACR,cAAc;YAAE,UAAU;YAAK,WAAW;QAAM;QAChD,YAAY,CAAC,EAAE,MAAM,EAAE,GAAK,OAAO,QAAQ,CAAC;QAC5C,WAAU;;0BAGV,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;gBACxD,OAAM;gBACN,WAAU;0BAEV,cAAA,+PAAC;oBAAI,WAAU;;sCACX,+PAAC,wOAAO;4BAAC,WAAU;;;;;;sCACnB,+PAAC,2NAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKtB,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,WAAW,GAAG,GAAG;gBACvD,OAAM;gBACN,WAAU;0BAEV,cAAA,+PAAC;oBAAI,WAAU;;sCACX,+PAAC,8OAAS;4BAAC,WAAU;;;;;;sCACrB,+PAAC,2NAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAItB,+PAAC;gBAAI,WAAU;;;;;;0BAGf,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,eAAe,GAAG,GAAG;gBAC3D,OAAM;gBACN,WAAU;0BAEV,cAAA,+PAAC;oBAAI,WAAU;;sCACX,+PAAC,8OAAS;4BAAC,WAAU;;;;;;sCACrB,+PAAC,2NAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKtB,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,cAAc,GAAG,GAAG;gBAC1D,OAAM;gBACN,WAAU;0BAEV,cAAA,+PAAC;oBAAI,WAAU;;sCACX,+PAAC,iPAAU;4BAAC,WAAU;;;;;;sCACtB,+PAAC,2NAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAItB,+PAAC;gBAAI,WAAU;;;;;;0BAGf,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,SAAS,GAAG,GAAG;gBACrD,OAAM;gBACN,WAAU;;kCAEV,+PAAC,8NAAK;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAKpC,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,YAAY,GAAG,GAAG;gBACxD,OAAM;gBACN,WAAU;;kCAEV,+PAAC,8NAAK;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAIpC,+PAAC;gBAAI,WAAU;;;;;;0BAGf,+PAAC;gBACC,MAAK;gBACL,SAAS,IAAM,OAAO,KAAK,GAAG,KAAK,GAAG,WAAW,GAAG,GAAG;gBACvD,OAAM;gBACN,WAAU;0BAEV,cAAA,+PAAC,qOAAM;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1B;uCAEe"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/extensions.ts"],"sourcesContent":["import { Extension } from '@tiptap/core';\r\nimport '@tiptap/extension-text-style';\r\n\r\ndeclare module '@tiptap/core' {\r\n    interface Commands<ReturnType> {\r\n        fontSize: {\r\n            setFontSize: (size: string) => ReturnType;\r\n            unsetFontSize: () => ReturnType;\r\n        };\r\n    }\r\n}\r\n\r\nexport const FontSize = Extension.create({\r\n    name: 'fontSize',\r\n\r\n    addOptions() {\r\n        return {\r\n            types: ['textStyle'],\r\n        };\r\n    },\r\n\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    fontSize: {\r\n                        default: null,\r\n                        parseHTML: (element) => element.style.fontSize.replace(/['\"]+/g, ''),\r\n                        renderHTML: (attributes) => {\r\n                            if (!attributes.fontSize) {\r\n                                return {};\r\n                            }\r\n                            return {\r\n                                style: `font-size: ${attributes.fontSize}`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n\r\n    addCommands() {\r\n        return {\r\n            setFontSize:\r\n                (fontSize) =>\r\n                    ({ chain }) => {\r\n                        return chain()\r\n                            .setMark('textStyle', { fontSize })\r\n                            .run();\r\n                    },\r\n            unsetFontSize:\r\n                () =>\r\n                    ({ chain }) => {\r\n                        return chain()\r\n                            .setMark('textStyle', { fontSize: null })\r\n                            .removeEmptyTextStyle()\r\n                            .run();\r\n                    },\r\n        };\r\n    },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAWO,MAAM,WAAW,+KAAS,CAAC,MAAM,CAAC;IACrC,MAAM;IAEN;QACI,OAAO;YACH,OAAO;gBAAC;aAAY;QACxB;IACJ;IAEA;QACI,OAAO;YACH;gBACI,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK;gBACzB,YAAY;oBACR,UAAU;wBACN,SAAS;wBACT,WAAW,CAAC,UAAY,QAAQ,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU;wBACjE,YAAY,CAAC;4BACT,IAAI,CAAC,WAAW,QAAQ,EAAE;gCACtB,OAAO,CAAC;4BACZ;4BACA,OAAO;gCACH,OAAO,CAAC,WAAW,EAAE,WAAW,QAAQ,EAAE;4BAC9C;wBACJ;oBACJ;gBACJ;YACJ;SACH;IACL;IAEA;QACI,OAAO;YACH,aACI,CAAC,WACG,CAAC,EAAE,KAAK,EAAE;oBACN,OAAO,QACF,OAAO,CAAC,aAAa;wBAAE;oBAAS,GAChC,GAAG;gBACZ;YACR,eACI,IACI,CAAC,EAAE,KAAK,EAAE;oBACN,OAAO,QACF,OAAO,CAAC,aAAa;wBAAE,UAAU;oBAAK,GACtC,oBAAoB,GACpB,GAAG;gBACZ;QACZ;IACJ;AACJ"}},
    {"offset": {"line": 972, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/components/editor/DocumentEditor.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Underline from '@tiptap/extension-underline';\r\nimport Table from '@tiptap/extension-table';\r\nimport TableRow from '@tiptap/extension-table-row';\r\nimport TableCell from '@tiptap/extension-table-cell';\r\nimport TableHeader from '@tiptap/extension-table-header';\r\nimport TextStyle from '@tiptap/extension-text-style';\r\nimport TextAlign from '@tiptap/extension-text-align';\r\nimport { PaginationPlus } from 'tiptap-pagination-plus';\r\nimport { useState, useRef } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nimport EditorToolbar from './EditorToolbar';\r\nimport TableMenu from './TableMenu';\r\nimport { FontSize } from './extensions';\r\n\r\nexport default function DocumentEditor() {\r\n    const [theme, setTheme] = useState<'light' | 'dark'>('light');\r\n\r\n    const editor = useEditor({\r\n        extensions: [\r\n            StarterKit,\r\n            Underline,\r\n            TextStyle,\r\n            FontSize,\r\n            TextAlign.configure({\r\n                types: ['paragraph', 'heading'],\r\n            }),\r\n            Table.configure({\r\n                resizable: true,\r\n            }),\r\n            TableRow,\r\n            TableHeader,\r\n            TableCell,\r\n            PaginationPlus.configure({\r\n                pageHeight: 1056,\r\n                pageWidth: 816,\r\n            }),\r\n        ],\r\n        content: ``,\r\n        editorProps: {\r\n            attributes: {\r\n                class: 'outline-none h-full p-8',\r\n                style: 'min-height: 1056px;'\r\n            },\r\n        },\r\n        immediatelyRender: false,\r\n    });\r\n\r\n    const handleExportPDF = () => {\r\n        if (!editor) return;\r\n        window.print();\r\n    };\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => prev === 'light' ? 'dark' : 'light');\r\n    };\r\n\r\n    if (!editor) {\r\n        return null; // Or a loading spinner\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\"flex flex-col h-screen w-full bg-background transition-colors duration-200\", theme)}>\r\n            <div className=\"flex flex-col h-full bg-[var(--workspace-bg)]\">\r\n                <EditorToolbar\r\n                    editor={editor}\r\n                    theme={theme}\r\n                    onToggleTheme={toggleTheme}\r\n                    onExportPDF={handleExportPDF}\r\n                />\r\n\r\n                <div className=\"flex-1 overflow-auto p-8 flex justify-center\">\r\n                    <div className=\"relative\">\r\n                        <EditorContent\r\n                            editor={editor}\r\n                            className={cn(\r\n                                \"min-h-[1056px] w-[816px] bg-[hsl(var(--page-bg))] border border-[hsl(var(--page-border))] shadow-[0_4px_6px_-1px_hsl(var(--page-shadow))] text-[hsl(var(--editor-text))]\",\r\n                                \"transition-colors duration-200\"\r\n                            )}\r\n                        />\r\n                        <TableMenu editor={editor} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAjBA;;;;;;;;;;;;;;;;;AAmBe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kOAAQ,EAAmB;IAErD,MAAM,SAAS,IAAA,gMAAS,EAAC;QACrB,YAAY;YACR,uLAAU;YACV,+LAAS;YACT,mMAAS;YACT,sKAAQ;YACR,mMAAS,CAAC,SAAS,CAAC;gBAChB,OAAO;oBAAC;oBAAa;iBAAU;YACnC;YACA,2LAAK,CAAC,SAAS,CAAC;gBACZ,WAAW;YACf;YACA,kMAAQ;YACR,qMAAW;YACX,mMAAS;YACT,yMAAc,CAAC,SAAS,CAAC;gBACrB,YAAY;gBACZ,WAAW;YACf;SACH;QACD,SAAS,EAAE;QACX,aAAa;YACT,YAAY;gBACR,OAAO;gBACP,OAAO;YACX;QACJ;QACA,mBAAmB;IACvB;IAEA,MAAM,kBAAkB;QACpB,IAAI,CAAC,QAAQ;QACb,OAAO,KAAK;IAChB;IAEA,MAAM,cAAc;QAChB,SAAS,CAAA,OAAQ,SAAS,UAAU,SAAS;IACjD;IAEA,IAAI,CAAC,QAAQ;QACT,OAAO,MAAM,uBAAuB;IACxC;IAEA,qBACI,+PAAC;QAAI,WAAW,IAAA,0IAAE,EAAC,8EAA8E;kBAC7F,cAAA,+PAAC;YAAI,WAAU;;8BACX,+PAAC,yKAAa;oBACV,QAAQ;oBACR,OAAO;oBACP,eAAe;oBACf,aAAa;;;;;;8BAGjB,+PAAC;oBAAI,WAAU;8BACX,cAAA,+PAAC;wBAAI,WAAU;;0CACX,+PAAC,oMAAa;gCACV,QAAQ;gCACR,WAAW,IAAA,0IAAE,EACT,4KACA;;;;;;0CAGR,+PAAC,qKAAS;gCAAC,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3C"}},
    {"offset": {"line": 1116, "column": 0}, "map": {"version":3,"sources":["file:///F:/antigravity/doc-editor/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport DocumentEditor from '@/components/editor/DocumentEditor';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { useState } from 'react';\r\n\r\nexport default function Home() {\r\n    const [queryClient] = useState(() => new QueryClient());\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <DocumentEditor />\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,YAAY,GAAG,IAAA,kOAAQ,EAAC,IAAM,IAAI,6MAAW;IAEpD,qBACI,+PAAC,8NAAmB;QAAC,QAAQ;kBACzB,cAAA,+PAAC,0KAAc;;;;;;;;;;AAG3B"}}]
}